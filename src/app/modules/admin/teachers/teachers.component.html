<div class="mx-auto p-4 sm:p-6">
  <!-- Header -->
  <div
    class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4 border-b border-gray-200 pb-4"
  >
    <h2 class="text-2xl sm:text-3xl font-bold text-gray-800">
      Lista de Usuarios
    </h2>
    <button
      (click)="openAddModal()"
      class="flex items-center justify-center gap-2 bg-red-900 hover:bg-red-700 text-white px-4 py-2 rounded-md shadow transition-colors duration-200 w-full sm:w-auto"
    >
      <span class="material-symbols-outlined text-base">add</span>
      <span class="text-base sm:text-lg">Añadir usuario</span>
    </button>
  </div>

  <!-- Buscador -->
  <div class="mb-4">
    <input
      type="text"
      [(ngModel)]="searchTerm"
      (input)="applyFilter()"
      placeholder="Buscar usuario..."
      class="w-full sm:w-1/2 border border-gray-300 rounded-lg px-4 py-2 text-base focus:ring-2 focus:ring-red-800 focus:outline-none"
    />
  </div>

  <!-- Tabla responsive con scroll en tbody -->
  <div class="bg-white shadow-md rounded-lg overflow-hidden">
    <table class="min-w-full divide-y divide-gray-200">
      <!-- Cabecera fija -->
      <thead class="bg-gray-800 sticky top-0 z-10">
        <tr>
          <th
            class="px-6 py-3 text-left text-sm font-medium text-white uppercase tracking-wider"
          >
            Nombre
          </th>
          <th
            class="px-6 py-3 text-left text-sm font-medium text-white uppercase tracking-wider"
          >
            Teléfono
          </th>
          <th
            class="px-6 py-3 text-left text-sm font-medium text-white uppercase tracking-wider"
          >
            Dirección
          </th>
          <th
            class="px-6 py-3 text-left text-sm font-medium text-white uppercase tracking-wider"
          >
            Rol
          </th>
            <th
            class="px-6 py-3 text-left text-sm font-medium text-white uppercase tracking-wider"
          >
           
          </th>
        </tr>
      </thead>
    </table>

    <!-- Contenedor scroll SOLO para tbody -->
    <div class="max-h-[500px] overflow-y-auto">
      <table class="min-w-full divide-y divide-gray-200">
        <tbody class="bg-white divide-y divide-gray-200">
          @for (user of filteredUsers; track $index) {
          <tr
            class="hover:bg-gray-50 transition-colors duration-150 cursor-pointer"
            
          >
            <td class="px-6 py-4 whitespace-nowrap" (click)="openEditModal(user)">
              <div class="text-base font-medium text-gray-900">
                {{ user.firstName + ' ' + user.lastName }}
              </div>

            </td>
            <td class="px-6 py-4 whitespace-nowrap text-base text-gray-600" (click)="openEditModal(user)">
              {{ user.phone || 'N/A' }}
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-base text-gray-600" (click)="openEditModal(user)">
              {{ user.address }}
            </td>
            <td class="px-6 py-4 whitespace-nowrap" (click)="openEditModal(user)">
              <span
                class="px-2 inline-flex text-sm leading-5 font-semibold rounded-full bg-red-100 text-red-800"
              >
                {{ roleName(user.role.name) }}
              </span>
            </td>
            <td>
              <button
                  (click)="deleteUser(user)"
                  class="p-2 rounded-full bg-red-100 hover:bg-red-200 text-red-700 transition"
                  title="Eliminar"
                >
                  <span class="material-symbols-outlined text-base">delete</span>
               </button>   
            </td>
             
            
          </tr>
          }
        </tbody>
      </table>
    </div>

    <!-- Mensaje cuando no hay estudiantes -->
    @if (filteredUsers?.length == 0) {
    <div class="text-center py-12 px-4">
      <span class="text-gray-400 text-5xl sm:text-6xl mb-3">Usuarios</span>
      <h3 class="text-lg sm:text-xl font-medium text-gray-600">
        No hay usuarios registrados
      </h3>
      <p class="text-gray-500 mt-1 text-base sm:text-lg">
        Agrega nuevos usuario para comenzar
      </p>
      <button
        (click)="openAddModal()"
        class="mt-4 bg-red-900 hover:bg-red-800 text-white px-4 py-2 rounded-md inline-flex items-center text-base sm:text-lg"
      >
        <span class="material-symbols-outlined mr-1 text-base">add</span>
        Agregar usuario
      </button>
    </div>
    }
  </div>
</div>
